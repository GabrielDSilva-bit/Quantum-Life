<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" type="text/css" href="/css/home.css" media="screen" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <title>Quantum Life</title>
</head>
<body>
  <header>
    <div class="container">
      <a href="/"><img class="image-bar" src="/IMG/quantumlife 2.png" alt="Logo" /></a>
      <nav class="nav-bar">
           <a href="/">PÁGINA INICIAL</a>
          <a href="/sobre">SOBRE</a>
          <a href="/quiz-dieta">DIETA</a>
          <a href="/quiz-treino">TREINOS</a>
          <a href="/imc">IMC</a>
      </nav>
      <div id="login-container">
        <a href="/login-cadastro" class="btn-entrar" id="btn-entrar">ENTRAR</a>
       <a href="/perfil" id="profile-link" style="display:none; cursor:pointer;">
          <img href="https://cdn-icons-png.flaticon.com/512/1946/1946429.png" src="https://cdn-icons-png.flaticon.com/512/1946/1946429.png" alt="Perfil" style="width:32px; height:32px; border-radius:50%;" />
        </a>
      </div>
    </div>
  </header>

  <script>
    function isLoggedIn() {
      const token = localStorage.getItem('token');
      if (!token) return false;
      try {
        const payload = JSON.parse(atob(token.split('.')[1]));
        const now = Date.now() / 1000;
        // Verifica se o token expirou (payload.exp é opcional no JWT, mas boa prática)
        if (payload.exp && payload.exp < now) return false;
        return true;
      } catch {
        return false; // Erro ao decodificar ou parsear o token
      }
    }

    // Função para atualizar o cabeçalho (botão/ícone)
    function updateHeaderLoginStatus() {
      const btnEntrar = document.getElementById('btn-entrar'); // Seleciona pelo ID agora
      const profileLink = document.getElementById('profile-link');

      if (isLoggedIn()) {
        if (btnEntrar) { // Garante que o botão existe
          btnEntrar.style.display = 'none'; // Esconde o botão Entrar
        }
        if (profileLink) { // Garante que o link do perfil existe
          profileLink.style.display = 'inline'; // Mostra o ícone de perfil
          // Opcional: Você pode adicionar aqui o ícone do Font Awesome se preferir
          // profileLink.innerHTML = '<i class="fas fa-user-circle" style="font-size: 32px; color: #fff;"></i>';
          // profileLink.href = '/perfil'; // Link para a página de perfil
        }
      } else {
        if (btnEntrar) {
          btnEntrar.style.display = 'inline'; // Mostra o botão Entrar
        }
        if (profileLink) {
          profileLink.style.display = 'none'; // Esconde o ícone de perfil
        }
      }
    }

    // Chamar a função quando o DOM estiver completamente carregado
    window.addEventListener('DOMContentLoaded', updateHeaderLoginStatus);

    // Opcional: Se você tem um script de login separado, adicione esta chamada lá
    // Após o login bem-sucedido (onde você salva o token no localStorage), chame:
    // updateHeaderLoginStatus();
    // Exemplo:
    // fetch('/login', { ... })
    // .then(response => response.json())
    // .then(data => {
    //     if (data.token) {
    //         localStorage.setItem('token', data.token); // Salva o token
    //         updateHeaderLoginStatus(); // Atualiza o header imediatamente após salvar
    //         window.location.href = '/'; // Redireciona para a página inicial, por exemplo
    //     }
    // })
    // .catch(error => console.error('Erro de login:', error));
  </script>

  <section class="hero">
    <div class="hero-text">
      <h1>Quantum Life</h1>
      <p>"Seu bem-estar em um clique: <br> IMC, dietas e treino personalizados!"</p>
    </div>
    <img class="hero-image" src="/IMG/Logo-Branca-removebg-preview.png" alt="Imagem principal" />
  </section>

  <section class="section-row">
    <div class="image-dieta">
      <img src="/IMG/image 4.png" alt="Imagem Dieta" />
    </div>
    <div class="section-text-Dieta">
      <img class="Dieta-Icon" src="/IMG/Icon Dieta_87x70.png" alt="Ícone Dieta" class="Ícone Dieta" />
      <div class="Dieta-Title-container">
        <h2 class="Dieta-Title">Dietas Personalizadas</h2>
      </div>
      <p class="Dieta-P">No Quantum Life, criamos dietas personalizadas com base no seu perfil e objetivos. Através de um quiz interativo e inteligência artificial.</p>
      <div class="Dieta-button">
        <a href="/quiz-dieta"><div class="button">Realize o Quiz</div></a>
      </div>
    </div>
  </section>

  <section class="section-row" style="flex-direction: row-reverse;">
    <div class="image-treino">
      <img src="/IMG/image 6.png" alt="Imagem Treino" />
    </div>
    <div class="section-text-treino">
      <div class="Treino-Icon">
        <img src="/IMG/Treino Icon.png" alt="Ícone Treino" />
      </div>
      <h2 class="Treino-Title">Treinos Personalizados</h2>
      <p class="Treino-P">Treinos baseados em seus objetivos Treinos para bulking no seu perfil e objetivos. Através de um quiz interativo e inteligência artificial"</p>
      <a href="/quiz-treino"><div class="button">Treino Ideal</div></a>
    </div>
  </section>

  <section class="section-row">
    <div class="image-imc">
      <img src="/IMG/medico.png" alt="Imagem Treino" />
      <div class="Imc-Title-container">
        <h2 class="Imc-Title">Cálculo IMC</h2>
        <div class="Imc-container">
          <div class="Imc-button-container">
            <a href="/imc"><div class="button-imc">Realize Seu Cálculo</div></a>
          </div>
        </div>
      </div>
  </section>

  <footer>
    <div class="social-icons">
      <img src="/IMG/google.png" alt="Social 1">
      <img src="/IMG/Facebook.png" alt="Social 2">
      <img src="/IMG/Linkedin.png" alt="Social 3">
    </div>
    <div class="footer-text">
      <p>© 2025 Feito Por Quantum Life.</p>
    </div>
  </footer>
</body>
</html>