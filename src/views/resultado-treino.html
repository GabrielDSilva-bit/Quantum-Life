<!DOCTYPE html>
<html lang="pt-BR">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resultado do Treino</title>
    <link rel="stylesheet" href="../CSS/resultado-treino.css">
    <link
      href="https://fonts.googleapis.com/css2?family=Karla:wght@300;400;500;700&family=Inter:wght@300;400;500;700&display=swap"
      rel="stylesheet">
  </head>

  <body>

    <header>
    <div class="container">
      <a href="../HTML/home.html"><img class="image-bar" src="../IMG/quantumlife 2.png" alt="Logo" /></a>
      <nav class="nav-bar">
         <a href="/">PÁGINA INICIAL</a>
          <a href="/sobre">SOBRE</a>
          <a href="/quiz-dieta">DIETA</a>
          <a href="/quiz-treino">TREINOS</a>
          <a href="/imc">IMC</a>
      </nav>     
      <div id="login-container">
        <a href="/login-cadastro" class="btn-entrar" id="btn-entrar">ENTRAR</a>
        <a href="/perfil" id="profile-link" style="display:none; cursor:pointer;">
          <img src="https://cdn-icons-png.flaticon.com/512/1946/1946429.png" alt="Perfil" style="width:32px; height:32px; border-radius:50%;" />
        </a>
      </div> 
    </div>
  </header>

  <script>
    function isLoggedIn( ) {
      const token = localStorage.getItem('token');
      if (!token) return false;
      try {
        const payload = JSON.parse(atob(token.split('.')[1]));
        const now = Date.now() / 1000;
        // Verifica se o token expirou (payload.exp é opcional no JWT, mas boa prática)
        if (payload.exp && payload.exp < now) return false;
        return true;
      } catch {
        return false; // Erro ao decodificar ou parsear o token
      }
    }

    // Função para atualizar o cabeçalho (botão/ícone)
    function updateHeaderLoginStatus() {
      const btnEntrar = document.getElementById('btn-entrar'); // Seleciona pelo ID agora
      const profileLink = document.getElementById('profile-link');

      if (isLoggedIn()) {
        if (btnEntrar) { // Garante que o botão existe
          btnEntrar.style.display = 'none'; // Esconde o botão Entrar
        }
        if (profileLink) { // Garante que o link do perfil existe
          profileLink.style.display = 'inline'; // Mostra o ícone de perfil
          // Opcional: Você pode adicionar aqui o ícone do Font Awesome se preferir
          // profileLink.innerHTML = '<i class="fas fa-user-circle" style="font-size: 32px; color: #fff;"></i>';
          // profileLink.href = '/perfil'; // Link para a página de perfil
        }
      } else {
        if (btnEntrar) {
          btnEntrar.style.display = 'inline'; // Mostra o botão Entrar
        }
        if (profileLink) {
          profileLink.style.display = 'none'; // Esconde o ícone de perfil
        }
      }
    }

    // Chamar a função quando o DOM estiver completamente carregado
    window.addEventListener('DOMContentLoaded', updateHeaderLoginStatus);

    // Opcional: Se você tem um script de login separado, adicione esta chamada lá
    // Após o login bem-sucedido (onde você salva o token no localStorage), chame:
    // updateHeaderLoginStatus();
    // Exemplo:
    // fetch('/login', { ... })
    // .then(response => response.json())
    // .then(data => {
    //     if (data.token) {
    //         localStorage.setItem('token', data.token); // Salva o token
    //         updateHeaderLoginStatus(); // Atualiza o header imediatamente após salvar
    //         window.location.href = '/'; // Redireciona para a página inicial, por exemplo
    //     }
    // })
    // .catch(error => console.error('Erro de login:', error));
  </script>

      <main>
        <section class="perfilDeTreino">

          <div class="container">

            <div class="tabelaTexto">
              <div class="name">
                <!-- ID para o título principal "Seu perfil de treino" -->
                <h1 id="idealTreinoHeading">Seu perfil de treino</h1>
              </div>

              <div class="boxText">
                <div class="textos">
                  <!-- ID para o subtítulo "Seu Plano de Treino Personalizado!" -->
                  <h2 id="profileTreinoTitle">Seu Plano de Treino Personalizado!</h2>
                </div>
                <div class="textos">
                  <!-- ID para a descrição abaixo do subtítulo -->
                  <p id="profileTreinoDescription">Aqui está o plano de treino gerado pela nossa inteligência artificial, feito sob medida para suas preferências:</p>
                </div>
              </div>

            </div>
          </div>

          <img
            src="/img/pessoas-malhando-em-ambientes-fechados-com-halteres.jpg"
            class="imagemBackground"
            alt="ImagemPerfil">

        </section>

        <section class="perfilDeTreino">

          <img
            src="/img/WhatsApp Image 2025-06-19 at 21.54.42.jpeg"
            class="imagemBackgroundLeft"
            alt="ImagemSugestao">

          <div class="container">

            <div class="tabelaTexto">

              <div class="name">
                <h1>Sugestão de Treino</h1>
              </div>
              <!-- NOVO ID: treinosSuggestionContent para o bloco dinâmico de sugestões -->
              <div id="treinoSuggestionContent">
                <!-- Item 1 -->
                <div class="background" id="treinoSuggestionItem1">
                  <div class="ballImg">
                    <span class="ball"></span>
                    <img src="" alt=""> <!-- O src e alt serão preenchidos pelo JS -->
                  </div>
                  <div class="divText">
                    <span class="backgroundTexto"></span>
                    <p></p> <!-- O texto será preenchido pelo JS -->
                  </div>
                </div>
                <!-- Item 2 -->
                <div class="background" id="treinoSuggestionItem2">
                  <div class="ballImg">
                    <span class="ball"></span>
                    <img src="" alt=""> <!-- O src e alt serão preenchidos pelo JS -->
                  </div>
                  <div class="divText">
                    <span class="backgroundTexto"></span>
                    <p></p> <!-- O texto será preenchido pelo JS -->
                  </div>
                </div>
                <!-- Item 3 -->
                <div class="background" id="treinoSuggestionItem3">
                  <div class="ballImg">
                    <span class="ball"></span>
                    <img src="" alt=""> <!-- O src e alt serão preenchidos pelo JS -->
                  </div>
                  <div class="divText">
                    <span class="backgroundTexto"></span>
                    <p></p> <!-- O texto será preenchido pelo JS -->
                  </div>
                </div>
              </div> <!-- Fim do div com id="treinoSuggestionContent" -->

            </div>

          </section>

          <section class="insights">

            <div class="container">
              <div class="tabelaTexto">
                <div class="embedp">

                  <div class="name">
                    <h1>Insights sobre seu perfil de treino</h1>
                  </div>
                </div>
                <div class="embed">
                  <!-- ID para a lista onde o plano de treino dia a dia será exibido -->
                  <ul id="profileTreinoDetails">
                    <!-- Conteúdo estático removido. Será preenchido dinamicamente pelo resultadoTreino.js -->
                  </ul>

                  <div class="embedp">
                    <p>A IA pode cometer erros. Sempre verifique as informações
                      mais importantes.</p>
                  </div>

                </div>

                <div class="divBtnQuiz">

                  <div class="btnVoltar">

                    <label class="btnImg"  for="btnQuiz">
                      <img src="/img/refresh_24dp_E3E3E3.svg" alt>
                    </label>
                    <a href="/quiz-treino">
                      <button class="retakeQuizButton" id="btnQuiz">Refazer o quiz</button>
                      </a>
                  </div>

                </div>

                
              </div>
            </div>
          </section>

         <footer>
    <div class="social-icons">
      <img src="../IMG/google.png" alt="Social 1">
      <img src="../IMG/Facebook.png" alt="Social 2">
      <img src="../IMG/Linkedin.png" alt="Social 3">
    </div>
    <div class="footer-text">
      <p>© 2025 Feito Por Quantum Life.</p>
  </div>  
  </footer> 

        </main>
        <!-- Inclua o script resultadoTreino.js aqui. Verifique o caminho correto para sua estrutura de pastas. -->
        <script src="/js/resultadoTreino.js"></script>
      </body>

    </html>